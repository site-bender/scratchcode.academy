---
import { Article, Figure } from "@sitebender/components";
import { CHARS } from "~constants";
import CoderEmail from "~components/CoderEmail/index.astro";
import Layout from "~layouts/index.astro";
import { getFormTitle } from "@sitebender/components";
import { getSubject } from "@sitebender/components";
import type { PageMeta } from "@sitebender/components/src/types";
import { WebPage } from "@sitebender/components/src/types/schema.org";
import { collapseWhitespace } from "@sitebender/components";

const { apostrophe: apos } = CHARS;

export const metadata: Partial<PageMeta> = {
	author: "Charles F. Munat, coder@scratchcode.academy",
	carbon: {
		beacon: {
			href: "https://digitalbeacon.co/report/scratchcode-academycontactmissing-email",
			firstCarbon: 0.01,
			grade: "A+",
			repeatCarbon: 0.006,
		},
		ecograder: {
			href: "https://ecograder.com/report/0rdAG0R5fg6pzq5nIpluFB7s",
			score: 83,
		},
		webCarbon: {
			count: 0.01,
			href: "https://www.websitecarbon.com/website/scratchcode-academy-contact-missing-email/",
			percentage: 99,
		},
	},
	getWebPageData: (version: string): WebPage => ({
		"@context": "https://schema.org",
		"@type": "WebPage",
		description: collapseWhitespace(`
			We were unable to process your contact form submission because your
			email address was missing. Please provide a valid email address
			and resubmit the form. We can do nothing until a valid email address
			is included.
		`),
		version,
	}),
	label: "Contact form missing email",
	next: "/contact",
	pageTitle: "Contact form missing email  ~ ScratchCode",
	robots: "noindex",
	title: getFormTitle("Contact form", "Missing email"),
};
---

<Layout metadata={metadata} noSubscribe title={metadata.title}>
	<Article id="main-content">
		<header class="article-header">
			<h1>Uh, oh</h1>
		</header>
		<p><mark>Your email address has gone missing.</mark></p>
		<p>
			We got your form submission. But we were <strong
				>unable to find your email address</strong
			>. We need a valid email address to permit us to respond to your message.
		</p>
		<p>
			Our stubborn server refused to proceed without an email address. <strong
				>We did not receive your message.</strong
			>
		</p>
		<p>
			This is an automated process: <strong
				>no human has seen your submission yet.</strong
			>
		</p>
		<p>
			Please use your browser{apos}s <strong>back button</strong> to return to
			the <strong>contact form.</strong> Then add your email address and
			re-submit the form.
		</p>
		<p>
			Or send an email to <CoderEmail
				domain="scratchcode.academy"
				emailAddress="coder"
				subject={getSubject(metadata.title)}
			/> if you believe that you received this message in error. You can also
			use our <a href="/feedback">feedback form</a>.
		</p>
		<p>
			If you do email us, then please put <strong
				>{getSubject(metadata.title)}</strong
			> in the subject line.
		</p>
		<p>
			We do want to hear from you, so we hope we can get this straightened out.
			If we have somehow screwed this up or there is something that we could do
			better, then please do let us know. <strong
				>Our sincere thanks for your efforts.</strong
			>
		</p>
	</Article>
</Layout>
